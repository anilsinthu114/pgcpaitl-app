<!doctype html>
<!-- cSpell:words PGCPAITL PGCP IFSC JNTU Vizianagaram BHIM Yono GPay PhonePe PayTM -->
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>PGCPAITL â€” Course Fee Payment</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- External CSS -->
    <link rel="stylesheet" href="/css/modern-student.css">
    <link rel="stylesheet" href="/css/gateway.css">
    <link rel="stylesheet" href="/css/toast.css">

    <script>
        // Define updateFee globally before page renders
        function updateFee(amt, label) {
            console.log(`ðŸ”„ updateFee called: â‚¹${amt} - ${label}`);
            const displayAmt = amt.toLocaleString('en-IN');
            const feeValue = amt === 30000 ? 'full' : 'emi';

            // 1. Update Order Summary
            const valEl = document.getElementById('amountValueText');
            const noteEl = document.getElementById('installmentNote');
            if (valEl) valEl.innerText = 'â‚¹' + displayAmt + '.00';
            if (noteEl) noteEl.innerText = label;

            // 2. Update Form Data
            const amtInput = document.getElementById('formAmount');
            const optInput = document.getElementById('fee_opt');
            if (amtInput) amtInput.value = amt;
            if (optInput) optInput.value = feeValue;

            // 3. Update Submit Button
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.innerText = label.toLowerCase().includes('installment')
                    ? `Verify & Submit â‚¹${displayAmt} (${label})`
                    : `Verify & Submit â‚¹${displayAmt} Payment`;
            }

            // 4. Update Visual Selection
            const emiLabel = document.getElementById('emiLabel');
            const fullRadio = document.querySelector('input[name="fee_opt"][value="full"]');
            const fullLabel = fullRadio ? fullRadio.nextElementSibling : null;

            if (amt === 15000) {
                if (emiLabel) {
                    emiLabel.style.borderColor = '#007bff';
                    emiLabel.style.borderWidth = '2px';
                    emiLabel.style.background = '#f0f7ff';
                }
                if (fullLabel) {
                    fullLabel.style.borderColor = '#ccc';
                    fullLabel.style.borderWidth = '1px';
                    fullLabel.style.background = 'white';
                }
            } else {
                if (fullLabel) {
                    fullLabel.style.borderColor = '#007bff';
                    fullLabel.style.borderWidth = '2px';
                    fullLabel.style.background = '#f0f7ff';
                }
                if (emiLabel) {
                    emiLabel.style.borderColor = '#ccc';
                    emiLabel.style.borderWidth = '1px';
                    emiLabel.style.background = 'white';
                }
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ðŸ“‹ Initializing payment UI...');

            // Attach event listeners to radio buttons
            const fullRadio = document.querySelector('input[name="fee_opt"][value="full"]');
            const emiRadio = document.querySelector('input[name="fee_opt"][value="emi"]');

            if (fullRadio) {
                fullRadio.addEventListener('change', () => {
                    if (fullRadio.checked) {
                        updateFee(30000, 'Full Fee');
                    }
                });
            }

            if (emiRadio) {
                emiRadio.addEventListener('change', () => {
                    if (emiRadio.checked) {
                        updateFee(15000, 'First Installment (EMI)');
                    }
                });
            }

            // Initialize with checked option
            const checked = document.querySelector('input[name="fee_opt"]:checked');
            if (checked) {
                const amt = (checked.value === 'emi') ? 15000 : 30000;
                const label = (checked.value === 'emi') ? 'First Installment (EMI)' : 'Full Fee';
                updateFee(amt, label);
            }
        });
    </script>
</head>

<body>
    <nav class="navbar">
        <a href="/" class="nav-brand">PGCPAITL ADMISSIONS</a>
        <ul class="nav-links">
            <li><a href="/">Home</a></li>
            <li><a href="/check-status.html">Track Status</a></li>
            <li><a href="/fee-rules.html">Fee Rules</a></li>
            <li><a href="/" class="nav-btn">Apply Now</a></li>
        </ul>
    </nav>

    <div class="gateway-wrapper">

        <!-- LEFT PANEL: ORDER SUMMARY -->
        <div class="gateway-left">
            <div class="order-header">
                <h2>Secure Checkout</h2>
                <h1>PGCPAITL Course Fee</h1>
            </div>

            <div class="order-amount">
                <div class="amount-label" id="amountLabelText">Total Amount Due</div>
                <div class="amount-value" id="amountValueText">â‚¹30,000.00</div>
                <div id="installmentNote" style="font-size:12px; opacity:0.6; margin-top:5px;">First Installment / Full
                    Fee</div>
            </div>

            <div class="order-details">
                <p><span>Application ID</span> <strong id="displayAppId">Loading...</strong></p>
                <p><span>Program</span> <strong>Artificial Intelligence, Technology & Law</strong></p>
                <p><span>University</span> <strong>JNTU-GV & DSNLU</strong></p>
                <p><span>Session</span> <strong>2025-2026</strong></p>
            </div>

            <div class="gateway-footer">
                Â© 2025 JNTU-GV. Secure Payment Portal.
            </div>
        </div>

        <!-- RIGHT PANEL: PAYMENT ACTIONS -->
        <div class="gateway-right">

            <div class="payment-title">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-1.07 3.97-2.9 5.4z" />
                </svg>
                Complete Your Payment
            </div>

            <div class="payment-methods">
                <div class="method-card active">
                    <h3>Scan QR / UPI</h3>
                </div>
            </div>

            <!-- EMI SELECTION -->
            <div class="emi-selection"
                style="margin: 20px 0; background: #f0f7ff; padding: 15px; border-radius: 8px; border: 1px solid #cce5ff;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h4 style="margin: 0; color:#004085;">Select Payment Option</h4>
                    <a href="/fee-rules.html" target="_blank"
                        style="font-size: 11px; color: #007bff; text-decoration: underline;">View Payment Rules</a>
                </div>
                <div style="display: flex; gap: 15px; margin-top: 10px;">
                    <label style="flex: 1; cursor: pointer;">
                        <input type="radio" name="fee_opt" value="full" checked>
                        <div
                            style="padding: 10px; border: 2px solid #007bff; border-radius: 6px; text-align: center; background: white;">
                            <strong>Full Payment</strong><br>â‚¹30,000
                        </div>
                    </label>
                    <label style="flex: 1; cursor: pointer;">
                        <input type="radio" name="fee_opt" value="emi">
                        <div style="padding: 10px; border: 1px solid #ccc; border-radius: 6px; text-align: center; background: white;"
                            id="emiLabel">
                            <strong>installment (EMI)</strong><br>â‚¹15,000
                        </div>
                    </label>
                </div>
            </div>

            <div class="info-banner" id="infoBanner">
                Step 1: Scan the QR code using any UPI app (GPay/PhonePe).<br>
                Step 2: If scanning is not possible, use the UPI ID below.<br>
                Step 3: Enter the UTR number and upload screenshot below.
            </div>

            <div class="payment-content">
                <!-- QR SECTION -->
                <div class="qr-section">
                    <div class="qr-frame">
                        <!-- Ensure this image exists, user should place it -->
                        <img src="/qr/sbi-qr.jpg" alt="Course Fee QR Code" onerror="this.src='/qr/sbi-qr.jpg'">
                    </div>
                    <div class="upi-info">
                        UPI : <strong id="upiId">registrarpgcp@sbi </strong>
                        <span> (or) </span> <br />
                        <strong id="upiId">44706716775@sbi</strong>
                    </div>
                    <div style="font-size:12px; color:#666;">
                        <strong>State Bank of India</strong><br>
                        Acc: 44706716775<br>
                        IFSC: SBIN0063645
                    </div>
                </div>



                <!-- FORM SECTION -->
                <div class="form-section">
                    <form id="payForm" enctype="multipart/form-data">
                        <input type="hidden" name="application_id" id="application_id">
                        <input type="hidden" name="payment_type" value="course_fee">
                        <input type="hidden" name="amount" id="formAmount" value="30000">
                        <input type="hidden" name="fee_opt" id="fee_opt" value="full">

                        <div class="input-group">
                            <label>UTR / Reference Number <span style="color:red">*</span></label>
                            <input type="text" name="utr" id="utr" required placeholder="Ex: 403918293..."
                                autocomplete="off">
                        </div>
                        <div class="input-group">
                            <label for="screenshot">Upload Payment Screenshot <span style="color:red">*</span></label>
                            <input type="file" name="screenshot" id="screenshot" accept="image/jpeg,image/png,image/jpg"
                                required class="file-upload-input">
                            <p class="help-text">
                                Please upload a clear screenshot of the successful transaction showing the UTR number
                                (JPG, JPEG, or
                                PNG).
                            </p>
                        </div>

                        <div id="payMsg" style="margin-bottom:15px; font-size:13px;"></div>

                        <button id="submitBtn" type="submit" class="btn-pay">
                            Verify & Submit â‚¹30,000 Payment
                        </button>
                    </form>

                    <div
                        style="margin-top: 15px; font-size: 11px; color: #555; background: #fffbe6; padding: 10px; border: 1px solid #ffe58f; border-radius: 4px;">
                        <strong>Installment Notice:</strong> If opting for EMI, the second installment of â‚¹15,000 is due
                        strictly on or before <strong>06 May 2026</strong>. Admission is confirmed only after the first
                        installment.
                    </div>

                    <div class="secure-badge">
                        ðŸ”’ SSL Secured Transaction
                    </div>
                </div>
            </div>


        </div>
    </div>

    <script src="/toast.js"></script>
    <script src="/payment.js" defer></script>
</body>

</html>